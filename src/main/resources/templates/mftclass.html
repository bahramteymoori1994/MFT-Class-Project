<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>MFT Class</title>
</head>
<body>
<h1>MFT Class</h1>
<form th:action="@{/mftclasses}" th:method="post" th:object="${mftClass}">

    <label for="lesson">Lesson</label>
    <select name="lesson" id="lesson">
        <option th:each="lesson : ${allLessons}" th:value="${lesson.id}" th:text="${lesson.title}"></option>
    </select>

    <label for="teacher">Teacher</label>
    <select name="teacher" id="teacher">
        <option th:each="teacher : ${allTeachers}" th:value="${teacher.id}" th:text="${teacher.family}"></option>
    </select>

    <label for="classType">Type</label>
    <select name="classType" id="classType" th:field="*{classType}">
        <option th:value="ONLINE">ONLINE</option>
        <option th:value="IN_PERSON">IN_PERSON</option>
        <option th:value="BLENDED">BLENDED</option>
    </select>

    <label for="startDate">Start Date</label>
    <input type="date" name="startDate" id="startDate" th:field="*{startDate}">

    <label for="location">Location</label>
    <select name="location" id="location" th:field="*{location}">
        <option th:value="Vanak">Vanak</option>
        <option th:value="Karaj">Karaj</option>
    </select>

    <label for="dayOfWeek">Date</label>
    <select name="dayOfWeek" id="dayOfWeek" th:field="*{dayOfWeek}">
        <option th:value="SATURDAY">SATURDAY</option>
        <option th:value="SUNDAY">SUNDAY</option>
        <option th:value="MONDAY">MONDAY</option>
        <option th:value="TUESDAY">TUESDAY</option>
        <option th:value="WEDNESDAY">WEDNESDAY</option>
        <option th:value="THURSDAY">THURSDAY</option>
        <option th:value="FRIDAY">FRIDAY</option>
    </select>

    <label for="startDate">Start Hour</label>
    <input type="time" name="startTime" id="startTime" th:field="*{startTime}">

    <label for="endTime">End Hour</label>
    <input type="time" name="endTime" id="endTime" th:field="*{endTime}">

    <label for="sessionNumber">Number of Sessions</label>
    <input type="number" name="sessionNumber" id="sessionNumber">

    <label for="onlineCode">Online Code</label>
    <input type="number" name="onlineCode" id="onlineCode" th:field="*{onlineCode}">

    <label for="inPersonCode">InPerson Code</label>
    <input type="number" name="inPersonCode" id="inPersonCode" th:field="*{inPersonCode}">

    <label for="capacity">Capacity</label>
    <input type="number" name="capacity" id="capacity" th:field="*{capacity}">

    <input type="submit" value="Save">

</form>

<h2 th:dir="ltr" th:if="${mftClasses.isEmpty()}">No Content</h2>
<table th:if="${not mftClasses.isEmpty()}">
    <thead>
    <tr>
        <th>Id</th>
        <th>Lesson</th>
        <th>Teacher</th>
        <th>Type</th>
        <th>Start Date</th>
        <th>Location</th>
        <th>Date</th>
        <th>Start Hour</th>
        <th>End Hour</th>
        <th>Number of Online Students</th>
        <th>Number of InPerson Students</th>
        <th>Number of Sessions</th>
        <th>Online Code</th>
        <th>InPerson Code</th>
        <th>Capacity</th>
        <th>Operation</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="mftClass : ${mftClasses}">
        <td th:text="${mftClass.id}"></td>
        <td th:text="${mftClass.lesson.title}"></td>
        <td th:text="${mftClass.teacher.family}"></td>
        <td th:text="${mftClass.classType}"></td>
        <td th:text="${mftClass.startDate}"></td>
        <td th:text="${mftClass.location}"></td>
        <td th:text="${mftClass.dayOfWeek}"></td>
        <td th:text="${mftClass.startTime}"></td>
        <td th:text="${mftClass.endTime}"></td>
        <td th:text="${mftClass.onlineStudents.size()}"></td>
        <td th:text="${mftClass.inPersonStudents.size()}"></td>
        <td th:text="${mftClass.lessonSessions.size()}"></td>
        <td th:text="${mftClass.onlineCode}"></td>
        <td th:text="${mftClass.inPersonCode}"></td>
        <td th:text="${mftClass.capacity}"></td>
        <td>
            <button th:data-name="${mftClass.id}" th:onclick="|remove(this.getAttribute('data-name'))|">Remove</button>
            <button th:data-name="${mftClass.id}" th:onclick="|edit(this.getAttribute('data-name'))|">Edit</button>
        </td>
    </tr>
    </tbody>
</table>


<script>
    function remove(id){
        fetch("/mftclasses/"+id,{
            method:"DELETE"
        });
        window.location.replace("/mftclasses");
    }

    // function edit(id){
    //
    //
    // }

</script>
</body>
</html>